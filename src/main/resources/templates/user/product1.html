<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
    <link href="https://unpkg.com/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <title>Sản phẩm</title>
</head>
<body>
<th:block th:replace="~{/partials/header}"></th:block>
<div class="container">
    <!--  Content  -->
    <div class="row my-3">
        <div class="col col-3">
            <article class="filter-group">
                <header class="card-header">
                    <a aria-expanded="true" class="" data-bs-target="#collapse_2" data-bs-toggle="collapse" href="#">
                        <div class="row">
                            <div class="col"><h6 class="title">Thương hiệu </h6></div>
                            <div class="col-lg-2"><i class="icon-control fa fa-chevron-down"></i></div>
                        </div>
                    </a>
                </header>
                <div class="filter-content collapse show" id="collapse_2" style="">
                    <div class="card-body">
                        <label class="custom-control custom-checkbox">
                            <input checked class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">All
                            </div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">Macbook (Apple)</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">Asus</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">HP</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">Lenovo</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">Acer</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">Dell</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">MSI</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">Surface</div>
                        </label>
                    </div> <!-- card-body.// -->
                </div>
            </article> <!-- filter-group .// -->
            <article class="filter-group">
                <header class="card-header">
                    <a aria-expanded="true" class="" data-bs-target="#collapse_3" data-bs-toggle="collapse" href="#">
                        <div class="row">
                            <div class="col"><h6 class="title">Giá </h6></div>
                            <div class="col-lg-2"><i class="icon-control fa fa-chevron-down"></i></div>
                        </div>
                    </a>
                </header>
                <div class="filter-content collapse show" id="collapse_3" style="">
                    <div class="card-body">
                        <label class="custom-control custom-checkbox">
                            <input checked class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">All</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label"> < 15 millions</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label"> 15 - 25 millions</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label"> 25 - 35 millions</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label"> 35 - 50 millions</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label"> > 50 millions</div>
                        </label>
                    </div><!-- card-body.// -->
                </div>
            </article> <!-- filter-group .// -->

            <article class="filter-group">
                <header class="card-header">
                    <a aria-expanded="true" class="" data-bs-target="#collapse_4" data-bs-toggle="collapse" href="#">
                        <div class="row">
                            <div class="col"><h6 class="title">Màu sắc</h6></div>
                            <div class="col-lg-2"><i class="icon-control fa fa-chevron-down"></i></div>
                        </div>
                    </a>
                </header>
                <div class="filter-content collapse show" id="collapse_4" style="">
                    <div class="card-body">
                        <label class="custom-control custom-checkbox">
                            <input checked class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">All</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">Đen</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">Bạc</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">Vàng</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">Hồng đỏ</div>
                        </label>
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox">
                            <div class="custom-control-label">Xanh</div>
                        </label>
                    </div><!-- card-body.// -->
                </div>
            </article> <!-- filter-group .// -->
        </div>
        <div class="col col-9">
            <div class="row">
                <div th:each="product : ${products}" class="col-md-4 my-3">
                    <div class="card card-product-grid rounded-2">
                        <div class="img-wrap">
                            <span class="badge rounded-pill badge-danger"> NEW </span>
                            <img alt="Image Product"
                                 class="rounded card-img-top"
                                 th:src="@{'data:image/jpeg;base64,' + ${product.getImage()}}">
                        </div>
                        <div class="info-wrap card-body">
                            <div class="fix-height">
                                <a th:text="${product.getName()}" class="card-title title" href="/detail"></a>
                                <div class="row price-wrap mb-2 mx-1">
                                    <div class="col-lg-7 rounded-pill bg-danger text-white my-3 text-center">
                                        <span th:text="${product.getNewPrice()}" class="price rounded-pill h6 price"></span>
                                    </div>
                                    <div class="col-lg-5 pt-3">
                                        <del th:text="${product.getPrice()}" class="price-old old-price"></del>
                                    </div>
                                </div>
                            </div>
                            <div class="fix-height rounded p-3 text-muted" style="background-color: #e9ecef">
                                <div th:text="${product.getConfig()}" class="row quick-info"></div>
                            </div>
                        </div>

                        <a class="btn btn-block btn-primary" href="/detail">Chi tiết sản phẩm</a>
                        <a class="btn btn-block btn-primary" data-bs-toggle="modal" href="#">
                            <i class="fas fa-cart-plus fa-3xl me-1"></i>
                            Thêm vào giỏ hàng </a>
                    </div>
                </div>
            </div>
            <nav aria-label="Page navigation example" class="mx-auto d-flex justify-content-center my-5">
                <div class="clearfix">
                    <ul class="pagination">
                        <li class="page-item">
                            <a th:if="${products.hasPrevious()}" class="page-link" th:href="@{/product(page=0)}">First</a>
                        </li>
                        <li class="page-item" th:classappend="${!products.hasPrevious()}  ? 'disabled' : ''">
                            <a class="page-link" th:if="${products.hasPrevious()}"
                               th:href="@{/product(page=${products.previousPageable().pageNumber})}">Previous</a>
                        </li>
                        <li th:each="i : ${#numbers.sequence(0, products.totalPages - 1)}"
                            th:class="${i == products.number ? 'page-item active' : 'page-item'}"
                            th:if="${i >= products.number - 2 and i <= products.number + 2}">
                            <a th:if="${i >= 0}" class="page-link" th:href="@{/product(page=${i})}" th:text="${i + 1}"></a>
                        </li>
                        <li class="page-item" th:classappend="${!products.hasNext()} ? 'disabled':''">
                            <a class="page-link" th:if="${products.hasNext()}"
                               th:href="@{/product(page=${products.nextPageable().pageNumber})}">Next</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" th:href="@{/product(page=${products.totalPages - 1 > 0 ? products.totalPages - 1 : 0})}">Last</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
</div>
<th:block th:replace="/partials/footer"></th:block>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
</body>
</html>
<script>
    const price = document.querySelectorAll('.price')
    const oldPrice = document.querySelectorAll('.old-price')
    price.forEach(pr => {
        let priceProduct = pr.innerHTML
        pr.innerHTML = Number(priceProduct).toLocaleString('en-US') + ' VNĐ';
    })

    oldPrice.forEach(oldp => {
        let priceProduct = oldp.innerHTML
        oldp.innerHTML = Number(priceProduct).toLocaleString('en-US') + ' VNĐ';
    })
</script>